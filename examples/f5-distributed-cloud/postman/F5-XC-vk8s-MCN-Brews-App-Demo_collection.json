{
	"info": {
		"_postman_id": "2f7c7bf3-e8d1-4e98-8f3d-ea1ed2ce6994",
		"name": "F5 XC vk8s MCN Demo (Brews App)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "6836446"
	},
	"item": [
		{
			"name": "Base Config",
			"item": [
				{
					"name": "Create namespace1",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"metadata\": {\n        \"name\": \"{{namespace_1}}\",\n        \"description\": \"\"\n    },\n    \"spec\": {}\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/web/namespaces",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"web",
								"namespaces"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "5s delay - allow namespace deploy completion",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://postman-echo.com/delay/5",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"delay",
								"5"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create SPA-API WAF",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-spa-api-appwf\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"app_profile\": null,\n    \"mode\": \"BLOCK\",\n    \"disabled_detection_tags\": null\n  },\n  \"resource_version\": null\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/app_firewalls",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"app_firewalls"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create MCN site grouping label key",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"namespace\": \"shared\",\n    \"key\": \"{{app_name_1}}-sites\",\n    \"description\": null,\n    \"values\": [\n        \"all-sites\"\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/shared/known_label_key/create",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"shared",
								"known_label_key",
								"create"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create MCN site grouping label",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"namespace\": \"shared\",\n    \"key\": \"{{app_name_1}}-sites\",\n    \"value\": \"all-sites\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/shared/known_label/create",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"shared",
								"known_label",
								"create"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create Brews large workload flavor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{namespace_1}}-large-flavor\",\n    \"namespace\": \"shared\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"disable\": false\n  },\n  \"spec\": {\n    \"memory\": \"0\",\n    \"ephemeral_storage\": \"300\"\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/shared/workload_flavors",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"shared",
								"workload_flavors"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				}
			]
		},
		{
			"name": "vk8s & vsites",
			"item": [
				{
					"name": "Create MCN vsite (AWS+GCP+Azure)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{namespace_1}}-mcn-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"CUSTOMER_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"{{app_name_1}}-sites in (all-sites)\"\n      ]\n    }\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create RE-only vsite (NYC+SEA)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{namespace_1}}-re-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"REGIONAL_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"ves.io/siteName in (ves-io-wes-sea, ves-io-ny8-nyc)\"\n      ]\n    }\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create Azure vsite",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{azure-site-name}}-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"CUSTOMER_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"ves.io/siteName in ({{azure-site-name}})\"\n      ]\n    }\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create AWS vsite",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{aws-site-name}}-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"CUSTOMER_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"ves.io/siteName in ({{aws-site-name}})\"\n      ]\n    }\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create GCP vsite",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{gcp-site-name}}-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"CUSTOMER_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"ves.io/siteName in ({{gcp-site-name}})\"\n      ]\n    }\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create vk8s cluster",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{app_name_1}}-vk8s\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"disable\": false\n  },\n  \"spec\": {\n    \"vsite_refs\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"{{namespace_1}}-mcn-vsite\",\n        \"kind\": \"virtual_site\"\n      }\n    ],\n    \"disabled\": {},\n    \"default_flavor_ref\": {\n      \"namespace\": \"shared\",\n      \"name\": \"{{namespace_1}}-large-flavor\",\n      \"kind\": \"workload_flavor\"\n    }\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_k8ss",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_k8ss"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "5s delay - allow vk8s deploy to finish",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://postman-echo.com/delay/5",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"delay",
								"5"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Workloads",
			"item": [
				{
					"name": "Create Container Registry - f5demos",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"f5demos\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"registry\": \"f5demos.azurecr.io\",\n    \"user_name\": \"1e21992e-4283-4afe-9a89-b3b314f1fd55\",\n    \"password\": {\n      \"blindfold_secret_info\": {\n        \"location\": \"string:///AAAAE2Y1LWNvbnN1bHQtcHJxbmthdG8AAAABAAAAAAAAAGUCAAAABQMNeoy9AAABAMGAoAmLy/oYvKy1kfy+zY47HncsgKO7CQU0UPHmNnB6dLZKehcjHYQiHbH/eci+49I8+eK86mkcpAoJxGGq4EzFYtAMfbpYedShz9NAWR+dwbchJQLQvBD5ZThI2FMMr6dSvCPlanbiGNe8WDEgvEct2X6lDyrrEPrdPkicFf1RCiooP2mZpxKMxK13pB2ojGX+Kl4T3LroY8u4O0oZdTG/mu7GKuvzugk9QyJQdQAE+LjZVKizI1+8jmXzNavHFLGuM7SPZlrfAWz34ETA+cj+20Zu0mlrthveO7VhvxOGRZyYwV7LjMq9244gAnwQScT3zhdkyZGRtAPCP39dl1UAAAEALw/jR92kt1RmZV8QILb6R3Un+W3XDTfIrmwpNFUDB48dZUFT/1VHrJvH4PPMYsU/mWs/aQiidy0xQGU6hfl33MZ2xR7dovqoLQohYNNaEbW3a9ts6816u8nDL4ht71bNgjjb79KVBeH5oOTdGT9sWWwpk3uK7j4nd/nWnUoCfxEDwY8f/JetjcX3UFjZadLDSlXbZKJvyIb6T4uTcytfqCX+QMH/AlHytFw/DUkUyF78hQUYiq0U1BeWOEiW46SaTH/69rbqbxkgUC2tfCWG5D8g/Uq0cBVK81tq0yIG3CwXrmVx42n34AJJcCJ10BZ9Dpwlgn2IAOLvZaRuDXSFlMCMs9Src0pZtyXxD9OVyLZZbdAk4UZRjQfl30yC1FXGLyd837N6WiOSQ7gLp0m/ypNZ\"\n      }\n    }\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/container_registrys",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"container_registrys"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Mongodb",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-mongodb\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"mongo\",\n          \"image\": {\n            \"name\": \"public.ecr.aws/o2z6z0t3/friday:demo\",\n            \"public\": {},\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [\n          {\n            \"env_var\": {\n              \"name\": \"SEED_FILE\",\n              \"value\": \"beerProducts.json\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_ce_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-gcp-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_in_cluster\": {\n          \"port\": {\n            \"info\": {\n              \"port\": 27017,\n              \"protocol\": \"PROTOCOL_TCP\",\n              \"same_as_port\": {}\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews API",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-api\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-api\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/api\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [\n          {\n            \"env_var\": {\n              \"name\": \"MONGO_URL\",\n              \"value\": \"mongodb.brews.local\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_ce_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-aws-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_in_cluster\": {\n          \"port\": {\n            \"info\": {\n              \"port\": 8000,\n              \"protocol\": \"PROTOCOL_TCP\",\n              \"same_as_port\": {}\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews SPA",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-spa\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-spa\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/spa\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": null,\n      \"deploy_options\": {\n        \"deploy_ce_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-mcn-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_in_cluster\": {\n          \"port\": {\n            \"info\": {\n              \"port\": 8081,\n              \"protocol\": \"PROTOCOL_TCP\",\n              \"target_port\": 80\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Inventory",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"//Determine Key Type ",
									"var is_https = pm.environment.get(\"use_https\");",
									"if (is_https === \"yes\") {",
									"    postman.setNextRequest(\"Deploy Brews Recommendations + HTTPS LB\");",
									"}",
									"else {",
									"    postman.setNextRequest(\"Deploy Brews Recommendations + HTTP LB\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-inv\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-inv\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/inv\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": null,\n      \"deploy_options\": {\n        \"deploy_ce_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-azure-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_in_cluster\": {\n          \"port\": {\n            \"info\": {\n              \"port\": 8002,\n              \"protocol\": \"PROTOCOL_TCP\",\n              \"same_as_port\": {}\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Recommendations + HTTPS LB",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"postman.setNextRequest(\"Create Mongodb Health Check\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-recs\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-recs\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/recs\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": null,\n      \"deploy_options\": {\n        \"deploy_re_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-re-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_on_public\": {\n          \"port\": {\n            \"port\": {\n              \"info\": {\n                \"port\": 8001,\n                \"protocol\": \"PROTOCOL_TCP\",\n                \"same_as_port\": {}\n              }\n            },\n            \"http_loadbalancer\": {\n              \"domains\": [\n                \"{{brews-recs-domain}}\"\n              ],\n              \"https_auto_cert\": {\n                \"http_redirect\": null,\n                \"add_hsts\": null,\n                \"port\": 443,\n                \"tls_config\": {\n                  \"default_security\": {}\n                },\n                \"no_mtls\": {},\n                \"default_header\": {},\n                \"enable_path_normalize\": {},\n                \"non_default_loadbalancer\": {}\n              },\n              \"default_route\": {\n                \"disable_host_rewrite\": {}\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Recommendations + HTTP LB",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"postman.setNextRequest(\"Create Mongodb Health Check\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-recs\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-recs\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/recs\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": null,\n      \"deploy_options\": {\n        \"deploy_re_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-re-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_on_public\": {\n          \"port\": {\n            \"port\": {\n              \"info\": {\n                \"port\": 8001,\n                \"protocol\": \"PROTOCOL_TCP\",\n                \"same_as_port\": {}\n              }\n            },\n            \"http_loadbalancer\": {\n              \"domains\": [\n                \"{{brews-recs-domain}}\"\n              ],\n              \"http\": {\n                \"dns_volterra_managed\": true,\n                \"port\": 80\n              },\n              \"default_route\": {\n                \"disable_host_rewrite\": {}\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				}
			]
		},
		{
			"name": "LB + WAAP",
			"item": [
				{
					"name": "Create Mongodb Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-mongodb-hc\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"tcp_health_check\": {\n      \"send_payload\": \"abc123\"\n    },\n    \"timeout\": 3,\n    \"interval\": 15,\n    \"unhealthy_threshold\": 1,\n    \"healthy_threshold\": 3,\n    \"jitter_percent\": 30\n  },\n  \"resource_version\": \"512132692\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/healthchecks",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"healthchecks"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create API Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-api-hc\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"http_health_check\": {\n      \"use_origin_server_name\": {},\n      \"path\": \"/api/stats\",\n      \"use_http2\": false,\n      \"headers\": {},\n      \"request_headers_to_remove\": []\n    },\n    \"timeout\": 3,\n    \"interval\": 15,\n    \"unhealthy_threshold\": 1,\n    \"healthy_threshold\": 3,\n    \"jitter_percent\": 30\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/healthchecks",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"healthchecks"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-spa-hc\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"http_health_check\": {\n      \"use_origin_server_name\": {},\n      \"path\": \"/products\",\n      \"use_http2\": false,\n      \"headers\": {},\n      \"request_headers_to_remove\": []\n    },\n    \"timeout\": 3,\n    \"interval\": 15,\n    \"unhealthy_threshold\": 1,\n    \"healthy_threshold\": 3,\n    \"jitter_percent\": 30\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/healthchecks",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"healthchecks"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create INV Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-inv-hc\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"http_health_check\": {\n      \"use_origin_server_name\": {},\n      \"path\": \"/api/stats\",\n      \"use_http2\": false,\n      \"headers\": {},\n      \"request_headers_to_remove\": []\n    },\n    \"timeout\": 3,\n    \"interval\": 15,\n    \"unhealthy_threshold\": 1,\n    \"healthy_threshold\": 3,\n    \"jitter_percent\": 30\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/healthchecks",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"healthchecks"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create Mongodb Origin Pool",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-mongodb-pool\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": \"Brews MCN PoC\",\n    \"disable\": false\n  },\n  \"spec\": {\n    \"origin_servers\": [\n      {\n        \"k8s_service\": {\n          \"service_name\": \"brews-mongodb.{{namespace_1}}\",\n          \"site_locator\": {\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-gcp-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"vk8s_networks\": {}\n        },\n        \"labels\": {}\n      }\n    ],\n    \"no_tls\": {},\n    \"port\": 27017,\n    \"same_as_endpoint_port\": {},\n    \"healthcheck\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"brews-mongodb-hc\",\n        \"kind\": \"healthcheck\"\n      }\n    ],\n    \"loadbalancer_algorithm\": \"LB_OVERRIDE\",\n    \"endpoint_selection\": \"LOCAL_PREFERRED\"\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/origin_pools",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"origin_pools"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create API Origin Pool",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-api-pool\",\n    \"labels\": {},\n    \"description\": \"Brews MCN PoC\"\n  },\n  \"spec\": {\n    \"origin_servers\": [\n      {\n        \"k8s_service\": {\n          \"service_name\": \"brews-api.{{namespace_1}}\",\n          \"site_locator\": {\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-aws-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"vk8s_networks\": {}\n        },\n        \"labels\": {}\n      }\n    ],\n    \"no_tls\": {},\n    \"port\": 8000,\n    \"same_as_endpoint_port\": {},\n    \"healthcheck\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"brews-api-hc\",\n        \"kind\": \"healthcheck\"\n      }\n    ],\n    \"loadbalancer_algorithm\": \"LB_OVERRIDE\",\n    \"endpoint_selection\": \"LOCAL_PREFERRED\"\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/origin_pools",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"origin_pools"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA Origin Pool",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-spa-pool\",\n    \"labels\": {},\n    \"description\": \"Brews MCN PoC\"\n  },\n  \"spec\": {\n    \"origin_servers\": [\n      {\n        \"k8s_service\": {\n          \"service_name\": \"brews-spa.{{namespace_1}}\",\n          \"site_locator\": {\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-mcn-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"vk8s_networks\": {}\n        },\n        \"labels\": {}\n      }\n    ],\n    \"no_tls\": {},\n    \"port\": 8081,\n    \"same_as_endpoint_port\": {},\n    \"healthcheck\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"brews-spa-hc\",\n        \"kind\": \"healthcheck\"\n      }\n    ],\n    \"loadbalancer_algorithm\": \"LB_OVERRIDE\",\n    \"endpoint_selection\": \"LOCAL_PREFERRED\"\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/origin_pools",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"origin_pools"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create INV Origin Pool",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-inv-pool\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"origin_servers\": [\n      {\n        \"k8s_service\": {\n          \"service_name\": \"brews-inv.{{namespace_1}}\",\n          \"site_locator\": {\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-azure-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"vk8s_networks\": {}\n        },\n        \"labels\": {}\n      }\n    ],\n    \"no_tls\": {},\n    \"port\": 8002,\n    \"same_as_endpoint_port\": {},\n    \"healthcheck\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"brews-inv-hc\",\n        \"kind\": \"healthcheck\"\n      }\n    ],\n    \"loadbalancer_algorithm\": \"LB_OVERRIDE\",\n    \"endpoint_selection\": \"LOCAL_PREFERRED\"\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/origin_pools",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"origin_pools"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create Mongodb TCP LB (internal)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-mongodb-tcp-lb\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": \"Brews MCN PoC\",\n    \"disable\": false\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-mongodb-domain}}\"\n    ],\n    \"listen_port\": 27017,\n    \"no_sni\": {},\n    \"dns_volterra_managed\": false,\n    \"origin_pools\": [],\n    \"origin_pools_weights\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-mongodb-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"advertise_custom\": {\n      \"advertise_where\": [\n        {\n          \"site\": {\n            \"network\": \"SITE_NETWORK_OUTSIDE\",\n            \"site\": {\n              \"namespace\": \"system\",\n              \"name\": \"{{namespace_1}}-aws\",\n              \"kind\": \"site\"\n            }\n          },\n          \"use_default_port\": {}\n        },\n        {\n          \"site\": {\n            \"network\": \"SITE_NETWORK_OUTSIDE\",\n            \"site\": {\n              \"namespace\": \"system\",\n              \"name\": \"{{namespace_1}}-azure\",\n              \"kind\": \"site\"\n            }\n          },\n          \"use_default_port\": {}\n        },\n        {\n          \"site\": {\n            \"network\": \"SITE_NETWORK_OUTSIDE\",\n            \"site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-gcp\",\n              \"kind\": \"site\"\n            }\n          },\n          \"use_default_port\": {}\n        }\n      ]\n    },\n    \"hash_policy_choice_round_robin\": {},\n    \"idle_timeout\": 3600000,\n    \"retract_cluster\": {},\n    \"tcp\": {},\n    \"dns_info\": [],\n    \"downstream_tls_certificate_expiration_timestamps\": []\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/tcp_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"tcp_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create INV HTTP LB (internal)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"//Determine Key Type ",
									"var is_https = pm.environment.get(\"use_https\");",
									"if (is_https === \"yes\") {",
									"    postman.setNextRequest(\"Create SPA-API HTTPS LB (public autocert)\");",
									"}",
									"else {",
									"    postman.setNextRequest(\"Create SPA-API HTTP LB (public)\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-inv-http-lb\",\n    \"labels\": {},\n    \"description\": \"Brews PoC MCN\"\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-inv-domain}}\"\n    ],\n    \"http\": {\n      \"dns_volterra_managed\": false,\n      \"port\": 80\n    },\n    \"advertise_custom\": {\n      \"advertise_where\": [\n        {\n          \"site\": {\n            \"network\": \"SITE_NETWORK_OUTSIDE\",\n            \"site\": {\n              \"namespace\": \"system\",\n              \"name\": \"{{namespace_1}}-aws\",\n              \"kind\": \"site\"\n            }\n          },\n          \"use_default_port\": {}\n        },\n        {\n          \"site\": {\n            \"network\": \"SITE_NETWORK_OUTSIDE\",\n            \"site\": {\n              \"namespace\": \"system\",\n              \"name\": \"{{namespace_1}}-azure\",\n              \"kind\": \"site\"\n            }\n          },\n          \"use_default_port\": {}\n        }\n      ]\n    },\n    \"default_route_pools\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-inv-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"routes\": [],\n    \"disable_waf\": {},\n    \"add_location\": false,\n    \"no_challenge\": {},\n    \"user_id_client_ip\": {},\n    \"disable_rate_limit\": {},\n    \"waf_exclusion_rules\": [],\n    \"data_guard_rules\": [],\n    \"blocked_clients\": [],\n    \"trusted_clients\": [],\n    \"ddos_mitigation_rules\": [],\n    \"service_policies_from_namespace\": {},\n    \"cookie_stickiness\": {\n      \"name\": \"brews-inv\"\n    },\n    \"multi_lb_app\": {},\n    \"disable_bot_defense\": {},\n    \"disable_api_definition\": {},\n    \"disable_ip_reputation\": {}\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/http_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"http_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA-API HTTPS LB (public autocert)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"postman.setNextRequest(null);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-shop-spa-https-lb\",\n    \"labels\": {},\n    \"description\": \"brews MCN PoC\"\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-spa-domain}}\"\n    ],\n    \"https_auto_cert\": {\n      \"http_redirect\": true,\n      \"add_hsts\": true,\n      \"port\": 443,\n      \"tls_config\": {\n        \"default_security\": {}\n      },\n      \"no_mtls\": {},\n      \"default_header\": {},\n      \"enable_path_normalize\": {},\n      \"non_default_loadbalancer\": {}\n    },\n    \"advertise_on_public_default_vip\": {},\n    \"default_route_pools\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-spa-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"routes\": [\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/api/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      },\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/images/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      }\n    ],\n    \"app_firewall\": {\n      \"namespace\": \"{{namespace_1}}\",\n      \"name\": \"brews-spa-api-appwf\",\n      \"kind\": \"app_firewall\"\n    },\n    \"add_location\": true,\n    \"no_challenge\": {},\n    \"user_id_client_ip\": {},\n    \"disable_rate_limit\": {},\n    \"waf_exclusion_rules\": [],\n    \"data_guard_rules\": [],\n    \"blocked_clients\": [],\n    \"trusted_clients\": [],\n    \"ddos_mitigation_rules\": [],\n    \"service_policies_from_namespace\": {},\n    \"round_robin\": {},\n    \"disable_trust_client_ip_headers\": {},\n    \"enable_ddos_detection\": {},\n    \"enable_malicious_user_detection\": {},\n    \"enable_api_discovery\": {\n      \"enable_learn_from_redirect_traffic\": {}\n    },\n    \"disable_bot_defense\": {},\n    \"disable_api_definition\": {},\n    \"disable_ip_reputation\": {}\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/http_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"http_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA-API HTTP LB (public)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-shop-spa-https-lb\",\n    \"labels\": {},\n    \"description\": \"brews MCN PoC\"\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-spa-domain}}\"\n    ],\n    \"http\": {\n      \"dns_volterra_managed\": true,\n      \"port\": 80\n    },\n    \"advertise_on_public_default_vip\": {},\n    \"default_route_pools\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-spa-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"routes\": [\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/api/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      },\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/images/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      }\n    ],\n    \"app_firewall\": {\n      \"namespace\": \"{{namespace_1}}\",\n      \"name\": \"brews-spa-api-appwf\",\n      \"kind\": \"app_firewall\"\n    },\n    \"add_location\": true,\n    \"no_challenge\": {},\n    \"user_id_client_ip\": {},\n    \"disable_rate_limit\": {},\n    \"waf_exclusion_rules\": [],\n    \"data_guard_rules\": [],\n    \"blocked_clients\": [],\n    \"trusted_clients\": [],\n    \"ddos_mitigation_rules\": [],\n    \"service_policies_from_namespace\": {},\n    \"round_robin\": {},\n    \"disable_trust_client_ip_headers\": {},\n    \"enable_ddos_detection\": {},\n    \"enable_malicious_user_detection\": {},\n    \"enable_api_discovery\": {\n      \"enable_learn_from_redirect_traffic\": {}\n    },\n    \"disable_bot_defense\": {},\n    \"disable_api_definition\": {},\n    \"disable_ip_reputation\": {}\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/http_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"http_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "apikey",
		"apikey": [
			{
				"key": "value",
				"value": "APIToken {{api_credential}}",
				"type": "string"
			},
			{
				"key": "key",
				"value": "Authorization",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}